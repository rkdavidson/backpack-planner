"use strict";angular.module("backpackPlannerApp",["ngGrid","nvd3ChartDirectives"]),angular.module("backpackPlannerApp").controller("MainCtrl",["$scope","$log","Foods",function(a,b,c){function d(a){var b=a.protein+a.carbs+a.fat,c=4*a.protein,d=4*a.carbs,e=9*a.fat;return{totalGrams:b,calsFromProtein:Math.round(c),calsFromCarbs:Math.round(d),calsFromFat:Math.round(e),percentProtein:Math.round(a.protein/b*100),percentCarbs:Math.round(a.carbs/b*100),percentFat:Math.round(a.fat/b*100),totalCals:c+d+e}}a.$log=b,a.foodGridOptions={data:"foodData",columnDefs:[{field:"category",displayName:"Category",minWidth:90,width:"auto"},{field:"description",displayName:"Description",minWidth:200,width:"auto"},{field:"brand",displayName:"Brand",minWidth:200,width:"auto"},{field:"size",displayName:"Size",minWidth:90,width:"auto"},{field:"ounces",displayName:"Weight (oz)",minWidth:80,width:"auto"},{field:"water",displayName:"H2O"},{field:"calories",displayName:"Cals"},{field:"protein",displayName:"Protein"},{field:"carbs",displayName:"Carbs"},{field:"fat",displayName:"Fat"},{field:"fiber",displayName:"Fiber",maxWidth:40,width:"auto"},{field:"calsPerCup",displayName:"Cals/Cup"},{field:"calsPerOunce",displayName:"Cals/Oz"}],rowTemplate:"views/grid/foodRow.html",rowHeight:24,showFilter:!0,showGroupPanel:!0,enableHighlighting:!0,enableRowSelection:!1,enableColumnHeavyVirt:!0,sortInfo:{fields:["category","description"],directions:["asc"]},groups:["category"],groupsCollapsedByDefault:!1},c.then(function(b){a.foodData=b}),a.analyzedRow=null,a.rowAnalysis={},a.analyzeRow=function(b){a.analyzedRow=b,a.rowAnalysis=d(b.entity),a.macronutrientPieData=[{key:"Protein",y:b.entity.protein},{key:"Carbs",y:b.entity.carbs},{key:"Fat",y:b.entity.fat}]};var e=["#FF4000","#BBEE00","#33AAFF","#FF00FF"];a.macronutrientColorFunction=function(){return function(a,b){return e[b]}},a.xFunctionPie=function(){return function(a){return a.key}},a.yFunctionPie=function(){return function(a){return a.y}}}]).factory("Foods",["$http","$q",function(a,b){var c="data/food-v1.json",d=b.defer();return a.get(c).then(function(a){d.resolve(a.data)}),d.promise}]);